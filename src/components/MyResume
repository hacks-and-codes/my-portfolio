import React from "react";
import validator from "validator";

class SecureResumeDownload extends React.Component {
  constructor(props) {
    super(props);

    // Define the URLs for your resumes (sanitize them properly)
    this.cybersecurityResumeUrl =
      "https://docs.google.com/document/d/e/2PACX-1vQVg3fziCzpMeB40h1yrG4cySUWe18AhCAcPoA1FIICZdFmFC4iZR9Vl-bs2al1NQdMDE4IS7fp9mbO/pub";
    this.webDevResumeUrl = "https://example.com/webdev_resume.pdf";
  }

  render() {
    return (
      <div>
        <h2>Download Resumes</h2>
        <button
          onClick={() => this.downloadResume(this.cybersecurityResumeUrl)}
        >
          Download Cybersecurity Resume
        </button>
        <button onClick={() => this.downloadResume(this.webDevResumeUrl)}>
          Download Web Development Resume
        </button>
      </div>
    );
  }

  downloadResume(url) {
    // Sanitize the URL to ensure it's a safe and valid URL
    if (
      validator.isURL(url, {
        protocols: ["http", "https"],
        require_protocol: true,
      })
    ) {
      // Create a hidden link and trigger a click to download the resume
      const link = document.createElement("a");
      link.href = url;
      link.target = "_blank"; // Open the link in a new tab
      link.download = "resume.pdf"; // Specify the file name
      link.click();
    } else {
      // Handle invalid or potentially malicious URLs
      alert("Invalid resume URL.");
    }
  }
}

export default SecureResumeDownload;
